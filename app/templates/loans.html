<!-- /templates/loans.html  -->
{% extends 'base.html' %}

{% block app_content %}
<form method="POST" id="target">
    <div class="form-group row flex-row-reverse">
        <div class="col-md-3">
            <a href="{{ url_for('loan_bp.loans', action='Nick') }}"
               class="btn btn-block btn-primary" role="button">show only Nick loans</a>
        </div>
        <div class="col-md-3">
            <a href="{{ url_for('loan_bp.loan', loan_id=0) }}"
               class="btn btn-block btn-danger" role="button">add new loan</a>
        </div>
    </div>
</form>
<div class="table-fixed">
    <table class="table" id="loans">
        <thead>
        <tr>
            <th style="width: 10.00%">code</th>
            <th style="width: 14.00%">borrower</th>
            <th style="width: 10.00%">int rate</th>
            <th style="width: 12.00%">lender</th>
            <th style="width: 12.00%">end date</th>
            <th style="width: 12.00%">notes</th>
            <th style="width: 12.00%">valuation date</th>
            <th style="width: 10.00%">valuation</th>
            <th style="width: 8.00%">action</th>
        </tr>
        </thead>
        <tbody>
        {% for item in loans %}
        <tr id="{{ item.id }}">
            <td style="width: 10.00%">{{ item.code }}</td>
            <td style="width: 14.00%"> {{ item.borrower }}</td>
            <td style="width: 10.00%"> {{ item.interest_rate }}</td>
            <td style="width: 12.00%"> {{ item.lender }}</td>
            <td style="width: 12.00%"> {{ item.end_date.strftime('%d-%b-%Y') if item.end_date else 'none'  }}</td>
            <td style="width: 12.00%"> {{ item.notes }}</td>
            <td style="width: 12.00%"> {{ item.val_date.strftime('%d-%b-%Y') if item.val_date else 'none'  }}</td>
            <td style="width: 10.00%"> {{ item.valuation }}</td>
            <td style="width: 8.00%"><a href="{{ url_for('loan_bp.loan', loan_id=item.id) }}" >view</a></td>
        </tr>
        {% endfor %}
        <tr>
        </tr>
        <tr>
            <td style="width: 6.00%"></td>
            <td style="width: 10.00%"></td>
            <td style="width: 14.00%">total for all loans</td>
            <td style="width: 10.00%"></td>
            <td style="width: 12.00%"></td>
            <td style="width: 10.00%"></td>
            <td style="width: 10.00%"></td>
            <td style="width: 10.00%"> {{ loansum.totval }} </td>
            <td style="width: 10.00%"> {{ loansum.totint }} </td>
            <td style="width: 8.00%"></td>
        </tr>
        </tbody>
    </table>
</div>
{% endblock %}
