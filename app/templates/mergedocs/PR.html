<!-- /templates/mergedocs/LTS.html  -->
{% extends 'base.html' %}

{% import 'widgets.html' as widgets %}

{% block app_content %}
<form method="POST" action="/save_html?action=payrequest">
    <div class="form-group row flex-row-reverse">
		<div class="col-md-2">
			<a href="/pr_dialog/{{ rentobject.id }}?action=view" class="btn btn-block btn-primary" role="button">back</a>
		</div>
        <div class="col-md-3">
            <button id="savehtml" class="btn btn-block btn-success" data-toggle="tooltip" title="This will save the pay request and forward the rent">save payrequest</button>
        </div>
    </div>
	<div id="doc_html" contenteditable="true">
	    {% if method == "letter" %}
			<div class="font-size-large" align="center">
				<b>{{ rentobject.managername }}</b>
			</div>
			<div class="font-size-small" align="center">
				{{ addressdata.manageraddr }}
				<br />
				{{ addressdata.manageraddr2 }}
				<br />
			</div>
			<div class="font-size-medium" align="right">
				Our Ref: {{ rentobject.rentcode }}
				<br />
				Date: {{ today_date.strftime('%d-%b-%Y') if today_date else 'none'  }}
			</div>
			<div class="font-size-medium" align="left">
				{% for item in mailaddr %}
					{{ item }}
					<br />
				{% endfor %}
				<br />
				<br />
				Dear {{ rentobject.tenantname }}
			</div>
	    {% else %}
			<div class="font-size-medium" align="left">
				Our Ref: {{ rentobject.rentcode }}
				<br />
				<br />
				Email sent on {{ today_date.strftime('%d-%b-%Y') if today_date else 'none'  }} to {{ rentobject.email }}
				<br />
				<br />
				Dear {{ rentobject.tenantname }}
			</div>
		{% endif %}
		<div class="font-size-medium" align="left">
			<b>{{ widgets.linebreaks_for_string(subject) }}</b>
			<br />
			<br />
			<table class="pr_table">
			{% for statement, value in table_rows.items() %}
				<tr>
					<td>{{ statement }}</a></td>
					<td class="amount_class">{{ value }}</td>
				</tr>
			{% endfor %}
				<tr class="total">
					<td>The total amount payable is:</a></td>
					<td class="amount_class">{{ totdue_string }}</td>
				</tr>
			</table>
			<br />
			<br />
			{{ widgets.linebreaks_for_string(block) }}
			<br />
			<br />
			Yours sincerely
			<br />
			<br />
			<br />
		    {% if method == "email" %}
				<b>{{ rentobject.managername }}</b>
				<br />
				{{ addressdata.manageraddr }}
				<br />
				{{ addressdata.manageraddr2 }}
				<br />
		    {% endif %}
			</div>
		</div>
	</div>
    <div class="form-group row">
		<div class="col-md-3">
            <input type="hidden" id="xinput" name="xinput" value = "xyz">
        </div>
    </div>
    <div class="form-group row">
		<div class="col-md-2">
            <input type="hidden" id="rentid" name="rentid" value = "{{ rentobject.id }}">
        </div>
		<div class="col-md-2">
            <input type="hidden" id="rentcode" name="rentcode" value = "{{ rentobject.rentcode }}">
        </div>
		<div class="col-md-2">
            <input type="hidden" id="doc_date" name="doc_date" value = "{{ today_date }}">
        </div>
		<div class="col-md-2">
            <input type="hidden" id="summary" name="summary" value = "{{ summary }}">
        </div>
		<div class="col-md-2">
            <input type="hidden" id="rent_date" name="rent_date" value = "{{ rentobject.nextrentdate }}">
        </div>
		<div class="col-md-2">
            <input type="hidden" id="totdue" name="totdue" value = "{{ totdue }}">
        </div>
		<div class="col-md-2">
            <input type="hidden" id="method" name="method" value = "{{ method }}">
        </div>
    </div>
</form>
{% endblock %}