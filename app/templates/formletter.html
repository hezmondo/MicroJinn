{% extends 'base.html' %}

{% import 'widgets.html' as widgets %}

{% block app_content %}
    <form method="POST" id="target">
		<div class="form-group row">
			<div class="col-md-2">
				<label for="code">Code:</label>
				<input type="text" class="form-control" name="code" value="{{ formletter.code }}">
			</div>
			<div class="col-md-6">
				<label for="summary">Summary:</label>
				<input type="text" class="form-control" name="summary" value="{{ formletter.summary }}">
			</div>
            <div class="col-md-2">
                <label for="doc_type">Type:</label>
                {{ widgets.combobox(name="doc_type", items=session['doc_types'], item_selected=formletter.desc) }}
            </div>
            <div class="col-md-2">
                <label for="template">Template:</label>
                {{ widgets.combobox(name="template", items=session['templates'], item_selected=formletter.template) }}
            </div>
		</div>
		<div class="form-group row">
			<div class="col-md-12">
				<label for="subject">Subject:</label>
				<input type="text" class="form-control" name="subject" value="{{ formletter.subject }}">
			</div>
		</div>
		<div class="form-group row">
			<div class="col-md-12">
				<label for="block">Block:</label>
				<textarea class="form-control" rows="16" name="block" >{{ formletter.block }}</textarea>
			</div>
		</div>
		<div class="form-group row">
			<div class="col-md-12">
				<label for="part1">Part 1:</label>
				<textarea class="form-control" rows="8" name="part1" >{{ formletter.part1 }}</textarea>
			</div>
		</div>
		<div class="form-group row">
		</div>
		<div class="form-group row">
		</div>
		<div class="form-group row">
			{% if action == "view" %}
			<div class="col-md-3">
				<a href="/formletter/{{ formletter.id }}?action=edit" class="btn btn-block btn-primary" role="button">Edit this formletter</a>
			</div>
			<div class="col-md-3">
				<a href="/formletter/{{ formletter.id }}?action=clone" class="btn btn-block btn-danger" role="button">Clone this formletter</a>
			</div>
			<div class="col-md-3">
				<a href="/formletter/0?action=new" class="btn btn-block btn-primary" role="button">Add new formletter</a>
			</div>
			{% elif action == "edit" %}
			<div class="col-md-3">
				<a href="/delete_item/{{ formletter.id }}?item=formletter"
				   onclick="return confirm('Are you sure you want to delete this formletter?');"
				   class="btn btn-block btn-warning" role="button">Delete this formletter</a>
			</div>
			<div class="col-md-3">
				<button type="submit" class="btn btn-block btn-success">Save changes</button>
			</div>
			{% else %}
			<div class="col-md-3">
				<button type="submit" class="btn btn-block btn-success">Save as new formletter</button>
			</div>
			{% endif %}
		</div>
    </form>
{% endblock %}

