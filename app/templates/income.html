<!-- /templates/income.html  -->
{% extends 'base.html' %}

{% import 'widgets.html' as widgets %}

{% block app_content %}
<form method="POST" id="target">
    <div class="form-group row">
        <div class="col-md-2">
            <input type="text" class="form-control" name="payer" placeholder="Payer">
        </div>
        <div class="col-md-2">
            <input type="text" class="form-control" name="rentcode" placeholder="Rentcode">
        </div>
        <div class="col-md-3">
            {{ widgets.combobox(name="accountdesc", items=bankaccs, item_selected=bankaccs[0]) }}
        </div>
        <div class="col-md-3">
            {{ widgets.combobox(name="paymtype", items=paytypes, item_selected=paytypes[0]) }}
        </div>
        <div class="col-md-2">
            <button type="submit" class="btn btn-block btn-success">Search</button>
        </div>
    </div>
    {% if rentid != 0 %}
        <div class="form-group row flex-row-reverse">
            <div class="col-md-3">
                <a href="/income_object/0?action=new" class="btn btn-block btn-primary" role="button">post income for this rent</a>
            </div>
            <div class="col-md-2">
                <a href="/rent_object/{{ rentid }}" class="btn btn-block btn-primary" role="button">back to rent</a>
            </div>
        </div>
    {% endif %}
</form>
<div class="container">
    <div class="row voffset2">
        <div class="col-lg-12">
            <h4 class="text-center">Filtered to show:</h4>
        </div>
    </div>
</div>
<div class="table-fixed">
    <table class="table" id="incomeitems">
        <thead>
        <tr>
            <th style="width: 10.00%">Date</th>
            <th style="width: 15.00%">Payer</th>
            <th style="width: 10.00%">Amount</th>
            <th style="width: 10.00%">Rentcode</th>
            <th style="width: 20.00%">Bank account</th>
            <th style="width: 20.00%">Payment type</th>
            <th style="width: 10.00%"></th>
        </tr>
        </thead>
        <tbody>
        {% for item in incomes %}
        <tr id="{{ item.id }}">
            <td style="width: 10.00%">{{ item.date.strftime('%d-%b-%Y') }}</td>
            <td style="width: 15.00%"> {{ item.payer }}</td>
            <td style="width: 10.00%"> {{ item.amount }}</td>
            <td style="width: 10.00%"> {{ item.rentcode }}</td>
            <td style="width: 20.00%"> {{ item.accdesc }}</td>
            <td style="width: 20.00%"> {{ item.paytypedet }}</td>
            <td style="width: 10.00%"><a href="/income_object/{{ item.id }}">View</a></td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
