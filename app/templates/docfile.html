<!-- /templates/docfile.html  -->
{% extends 'base.html' %}

{% import 'widgets.html' as widgets %}

{% block app_content %}
<form method="POST" action="/docfile/{{ docfile.id }}">
    <div class="form-group row flex-row-reverse">
        <div class="col-md-2">
            <a href="/docfiles/{{ docfile.rentid }}" class="btn btn-block btn-primary" role="button">back to docfiles</a>
        </div>
        <div class="col-md-2">
            <a href="/rent_object/{{ docfile.rentid }}" class="btn btn-block btn-primary" role="button">back to rent</a>
        </div>
        {% if doc_dig == "doc" %}
            <div class="col-md-2">
                <button id="savehtml" class="btn btn-block btn-success">save changes</button>
            </div>
        {% else %}
            <div class="col-md-2">
                <button type="submit" class="btn btn-block btn-success">save changes</button>
            </div>
            <div class="col-md-2">
                <a href="/download/{{ docfile.id }}" class="btn btn-block btn-primary" role="button">download to browser</a>
            </div>
        {% endif %}
        <div class="col-md-2">
            <a href="/delete_item/{{ docfile.id }}?item=docfile"
               onclick="return confirm('Are you sure you want to delete this docfile?');"
               class="btn btn-block btn-warning" role="button">delete docfile</a>
        </div>
    </div>
    <div class="form-group row">
		<div class="col-md-2">
            <input type="hidden" id="xinput" name="xinput" value = "xyz">
        </div>
		<div class="col-md-2">
            <input type="hidden" class="form-control" name="rentid" value = "{{ docfile.rentid }}">
        </div>
		<div class="col-md-2">
            <input type="hidden" class="form-control" name="doc_dig" value = "{{ doc_dig }}">
        </div>
    </div>
    <div class="form-group row">
        <div class="col-md-2">
            <input type="date" class="form-control" name="doc_date" value="{{ today_date }}">
        </div>
        <div class="col-md-2">
            <input type="text" class="form-control" name="rentcode" value = "{{ docfile.rentcode }}">
        </div>
        <div class="col-md-4">
            <input type="text" class="form-control" name="summary" value="{{ docfile.summary }}">
        </div>
		<div class="col-md-2">
			{{ widgets.combobox(name="doc_type", items=session['doc_types'], item_selected=docfile.desc) }}
		</div>
        <div class="col-md-2">
            {{ widgets.combobox(name="out_in", items=["all", "out", "in"], item_selected=outin) }}
        </div>
	</div>
    {% if doc_dig == "doc" %}
        <div id="doc_html" contenteditable="true">
            <br />
            {{ docfile.doc_text|safe}}
            <br />
        </div>
    {% endif %}
</form>
{% endblock %}