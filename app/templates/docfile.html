{% extends 'base.html' %}

{% import 'widgets.html' as widgets %}

{% block app_content %}
<form method="POST" action="/docfile/{{ docfile.id }}">
    <div class="form-group row">
        <div class="col-md-2">
            <input type="date" class="form-control" name="docfile_date" value="{{ today_date }}">
        </div>
        <div class="col-md-2">
            <input type="text" class="form-control" name="rentcode" value = "{{ docfile.rentcode }}">
        </div>
		<div class="col-md-2">
			{{ widgets.combobox(name="doc_type", items=session['doc_types'], item_selected=docfile.desc) }}
		</div>
        <div class="col-md-2">
            <input type="text" class="form-control" name="summary" value="{{ docfile.summary }}">
        </div>
        <div class="col-md-2">
            {{ widgets.combobox(name="out_in", items=["all", "out", "in"], item_selected=dfoutin) }}
        </div>
        <div class="col-md-2">
            <a href="/docfiles/{{ docfile.rentid }}" class="btn btn-block btn-primary" role="button">return</a>
        </div>
	</div>
	<div id="doc_html" contenteditable="true">
		<br />
		{{ docfile.docfile_text|safe}}
		<br />
	</div>
    <div class="form-group row">
	</div>
    <div class="form-group row">
		<div class="col-md-3">
            <input type="hidden" id="xinput" name="xinput" value = "xyz">
        </div>
        {% if action == "view" %}
        <div class="col-md-3">
            <a href="/docfile/{{ docfile.id }}?action=edit" class="btn btn-block btn-primary" role="button">edit this docfile</a>
        </div>
        <div class="col-md-3">
            <a href="/docfile/0?action=new" class="btn btn-block btn-primary" role="button">new docfile</a>
        </div>
        <div class="col-md-3">
            <a href="/rent_object/{{ docfile.rentid }}" class="btn btn-block btn-success" role="button">Back to rent</a>
        </div>
        {% else %}
        <div class="col-md-3">
            <a href="/delete_item/{{ docfile.id }}?item=docfile"
               onclick="return confirm('Are you sure you want to delete this docfile?');"
               class="btn btn-block btn-warning" role="button">delete this docfile</a>
        </div>
        <div class="col-md-3">
            <button id="savehtml" class="btn btn-block btn-success">save changes</button>
        </div>
        {% endif %}
    </div>
</form>
{% endblock %}