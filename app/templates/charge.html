{% extends 'base.html' %}

{% import 'widgets.html' as widgets %}

{% block app_content %}
<form method="POST" id="target">
    <div class="form-group row">
        <div class="col-md-2">
            <label for="chargeid">Charge id:</label>
            <input type="text" class="form-control" name="chargeid" value="{{ charge.id }}">
        </div>
        <div class="col-md-2">
            <label for="rentcode">Rent code:</label>
            <input type="text" class="form-control" name="rentcode" value="{{ charge.rentcode }}">
        </div>
        <div class="col-md-6">
            <label for="chargedesc">Charge type:</label>
            {{ widgets.combobox_id(idc="chargedesc", name="chargedesc", items=chargedescs, item_selected=charge.chargedesc) }}
        </div>
        <div class="col-md-2">
            <label for="chargestartdate">Charge start date:</label>
            <input type="date" class="form-control" id="date" name="chargestartdate" value="{{ charge.chargestartdate }}">
        </div>
    </div>
    <div class="form-group row">
        <div class="col-md-2">
            <label for="chargetotal">charge total:</label>
            <input type="text" class="form-control" id="chargetotal" name="chargetotal" value="{{ charge.chargetotal }}">
        </div>
        <div class="col-md-4">
            <label for="chargedetails">charge details:</label>
            <input type="text" class="form-control" id="chargedetails" name="chargedetails" value="{{ charge.chargedetails }}">
        </div>
        <div class="col-md-2">
            <label for="chargebalance">charge balance:</label>
            <input type="text" class="form-control" id="chargebalance" name="chargebalance" value="{{ charge.chargebalance }}">
        </div>
        <div class="col-md-2">
            <label for="rentid">rent id:</label>
            <input type="text" class="form-control" name="rentid" value="{{ charge.rentid }}">
        </div>
    </div>
    <div class="form-group row flex-row-reverse">
        <div class="col-md-2">
            <a href="/rent_object/{{ charge.rentid }}" class="btn btn-block btn-primary" role="button">back to rent</a>
        </div>
        <div class="col-md-2">
            <a href="/charges" class="btn btn-block btn-primary" role="button">back to charges</a>
        </div>
        {% if action == "view" %}
        <div class="col-md-2">
            <a href="/charge/{{ charge.id }}?action=edit" class="btn btn-block btn-primary" role="button">edit this charge</a>
        </div>
        <div class="col-md-3">
            <a href="/charge/0?rentid={{ charge.rentid }}?rentcode={{ charge.rentcode }}" class="btn btn-block btn-danger" role="button">add new charge for this rent</a>
        </div>
        {% else %}
            <div class="col-md-2">
                <button type="submit" class="btn btn-block btn-success">save changes</button>
            </div>
            {% if action == "edit" %}
                <div class="col-md-2">
                    <a href="/delete_item/{{ charge.id }}?item=charge"
                       onclick="return confirm('Are you sure you want to delete this charge?');"
                       class="btn btn-block btn-warning" role="button">delete charge</a>
                </div>
            {% endif %}
        {% endif %}
    </div>
</form>
<script type="text/javascript">
  var input1 = document.getElementById('chargedesc');
  var input2 = document.getElementById('chargetotal');
  var input3 = document.getElementById('chargedetails');
  var input4 = document.getElementById('chargebalance');

  input2.addEventListener('change', function() {
    input3.value = input1.value + " Â£" + input2.value ;
    input4.value = input2.value ;
  });
</script>
{% endblock %}

